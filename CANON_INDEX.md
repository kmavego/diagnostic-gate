# CANON_INDEX.md

## Diagnostic Gate — Canon Index

**Статус:** канон  
**Область действия:** весь проект Diagnostic Gate  
**Назначение:** фиксация иерархии канонов и правил их применения  

Этот документ определяет:
* какие канонические документы существуют,
* как они соотносятся между собой,
* какой документ имеет приоритет при расхождениях,
* что считается нарушением канона.

---

## 1. Иерархия канонов

В проекте Diagnostic Gate действует следующая строгая иерархия:

### Level 0 — Product Canon
**Файл:** `PRODUCT_CANON.md`

Фиксирует:
* сущность продукта,
* допустимого пользователя,
* продуктовую функцию,
* UX-границы,
* критерий успеха.

Имеет **наивысший приоритет**.

---

### Level 1 — System Canon
**Файл:** `Canon.md`

Фиксирует:
* архитектуру,
* state machine,
* Gate-модель,
* роль движка,
* принципы реализации.

Не может противоречить Product Canon.

---

### Level 2 — Gate Specifications
**Файлы:** `gates/*.yaml`

Фиксируют:
* формальные запреты,
* требуемые артефакты,
* условия PASS / BLOCK.

Не могут противоречить канонам уровней 0–1.

---

### Level 3 — Corpus
**Файлы:** `corpus/*.examples.yaml`

Фиксируют:
* регрессионные примеры,
* ожидаемые решения,
* error_code.

Являются контрактом между каноном и кодом.

---

### Level 4 — Code
**Файлы:** backend / engine / frontend

Код:
* не является источником истины,
* обязан соответствовать всем вышестоящим уровням,
* подлежит изменению при расхождении с каноном.

---

## 2. Правило приоритета

При любом конфликте трактовок действует правило:

> **Приоритет имеет документ с более высоким уровнем в иерархии.**

Примеры:
* Product Canon запрещает объясняющий UX → System Canon не может его допустить.
* Gate-spec требует данных, не описанных в Canon.md → Gate-spec ошибочен.
* Код делает PASS там, где corpus ожидает BLOCK → код ошибочен.

---

## 3. Что считается нарушением канона

Нарушением канона считается любое изменение, которое:

* ослабляет право Diagnostic Gate сказать «нельзя»;
* переводит BLOCK в «рекомендацию»;
* добавляет помощь, обучение или смягчение;
* делает решение недетерминированным;
* переносит ответственность с канона на пользователя или модель.

Нарушение канона = архитектурная ошибка.

---

## 4. Обязательная проверка изменений

Любое изменение в проекте должно отвечать на вопрос:

> **На каком уровне канона оно находится  
> и не противоречит ли уровням выше?**

Если ответ неочевиден — изменение запрещено.

---

## 5. Финальная фиксация

Diagnostic Gate развивается:
* не через расширение помощи,
* не через дружелюбие,
* не через удобство,

а через:
* усиление запрета,
* повышение формализуемости,
* укрепление доверия к решению.

**Этот индекс — часть канона.**

