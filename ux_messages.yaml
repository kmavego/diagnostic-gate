# ux_messages.yaml
spec_version: 1.0.0
namespace: NDS_DIAGNOSTIC_GATE
scope: course_design
description: "Единые тексты сообщений для error_code. Три длины: short / normal / detailed. Тон: cold_professional."

tone:
  name: cold_professional
  rules:
    - "Оценивается артефакт, не человек"
    - "Никаких смайлов, сарказма, извинений"
    - "Каждое сообщение: Факт → Последствие → Следующий ход"
    - "Запрет не обсуждается; обсуждается только исправление артефакта"

messages:

  # =========================================================
  # Gate 01 — PROBLEM_VALIDATION_01
  # =========================================================
  - error_code: ERR_VAGUE_OBJECTIVE
    reason_class: LEXICAL_NOISE
    title: "Глагол состояния"
    variants:
      short: "Остановка. Цель описана через состояние, а не действие."
      normal: >
        Остановка. В целевом действии использован глагол состояния (например: «понимать/знать»).
        Это не навык и не подлежит допуску.
      detailed: >
        Остановка. Вы описали состояние, а не наблюдаемое действие.
        Следствие: невозможно проверить результат и невозможно запретить ошибку.
        Исправление: перепишите цель как действие/решение, которое можно зафиксировать (документ/система/артефакт).

  - error_code: ERR_NON_OBSERVABLE_ACTION
    reason_class: NON_OBSERVABLE_ACTION
    title: "Нет наблюдаемого события"
    variants:
      short: "Запрет. Действие нельзя наблюдать или зафиксировать."
      normal: >
        Запрет. Действие не содержит наблюдаемого события (решение/действие в системе/фиксируемый артефакт).
        Без этого навык не проверяется.
      detailed: >
        Запрет. В текущем виде «действие» не имеет проверяемого следа.
        Следствие: контроль качества невозможен, курс превращается в декларацию.
        Исправление: добавьте событие выбора или действие в системе (что именно человек делает и где это видно).

  - error_code: ERR_INCOMPLETE_ERROR_SCENARIO
    reason_class: STRUCTURAL_DEFECT
    title: "Сценарий ошибки неполный"
    variants:
      short: "Запрет. В сценарии ошибки не хватает обязательных элементов."
      normal: >
        Запрет. Сценарий ошибки должен содержать: кто действует, что делает неправильно, и к чему это приводит.
        Сейчас один или несколько элементов отсутствуют.
      detailed: >
        Запрет. Артефакт недоопределён.
        Следствие: невозможно отличить правильный кейс от неправильного — значит нечего предотвращать.
        Исправление: добавьте (1) актора, (2) ошибочное действие, (3) прямое последствие в бизнесе/процессе.

  - error_code: ERR_ABSTRACT_ERROR
    reason_class: ABSTRACT_ERROR
    title: "Абстрактная ошибка"
    variants:
      short: "Остановка. Ошибка описана абстрактно."
      normal: >
        Остановка. Ошибка сформулирована общими словами и не привязана к конкретному инциденту.
        Такое нельзя запретить.
      detailed: >
        Остановка. Абстрактные формулировки не проверяются.
        Следствие: проект превращается в «курс про всё» без измеряемого эффекта.
        Исправление: приведите один конкретный инцидент: когда, где, кто, какое действие было совершено и какой ущерб последовал.

  - error_code: ERR_LOW_BUSINESS_IMPACT
    reason_class: LOW_IMPACT
    title: "Недостаточная значимость"
    variants:
      short: "Запрет. Цена ошибки ниже порога значимости."
      normal: >
        Запрет. Указанная цена ошибки ниже минимального порога.
        Проект не оправдан как управленческое вмешательство.
      detailed: >
        Запрет. При текущей цене ошибки обучение не окупится и не имеет основания для запуска.
        Исправление: либо покажите реальную стоимость (в деньгах/времени/конверсии),
        либо пересоберите проблему: вы ищете не критическую ошибку, а «улучшение ради улучшения».

  # =========================================================
  # Gate 02 — GOAL_TO_ADMISSION_02
  # =========================================================
  - error_code: ERR_DECLARATIVE_GOAL
    reason_class: DECLARATIVE_GOAL
    title: "Декларативная цель"
    variants:
      short: "Остановка. Цель декларативна и не управляет допуском."
      normal: >
        Остановка. Цель сформулирована как «развить/повысить/сформировать» или через абстракции.
        Из неё нельзя вывести правило недопуска.
      detailed: >
        Остановка. Декларативная цель не задаёт проверяемого результата.
        Следствие: нельзя определить, кто допущен к действию, а кто нет.
        Исправление: перепишите цель в формате: контекст → действие → стандарт/ограничение.

  - error_code: ERR_NON_OPERATIONAL_GOAL
    reason_class: NON_OPERATIONAL_GOAL
    title: "Цель неоперациональна"
    variants:
      short: "Запрет. Цель нельзя разложить на действие/контекст/стандарт."
      normal: >
        Запрет. Движок не может извлечь из цели наблюдаемое действие, контекст и стандарт.
        Значит цель не допускает формализации.
      detailed: >
        Запрет. В текущем виде цель не является объектом контроля качества.
        Следствие: любые правила допуска будут произвольными.
        Исправление: добавьте (1) что делает человек, (2) когда именно, (3) по какому стандарту считается «правильно».

  - error_code: ERR_NO_DECISION_CONTEXT
    reason_class: MISSING_DECISION_CONTEXT
    title: "Нет контекста решения"
    variants:
      short: "Запрет. Не задан триггер и альтернативы выбора."
      normal: >
        Запрет. Контекст решения должен содержать событие-триггер и альтернативы.
        Сейчас этого нет или это описано абстрактно.
      detailed: >
        Запрет. Без триггера и альтернатив нет решения — значит нечего тренировать и нечего запрещать.
        Исправление: укажите событие, после которого требуется выбор, и минимум 2 возможные линии поведения.

  - error_code: ERR_INVALID_ADMISSION_RULE
    reason_class: INVALID_ADMISSION_RULE
    title: "Неверная форма правила допуска"
    variants:
      short: "Остановка. Правило допуска должно быть бинарным запретом."
      normal: >
        Остановка. Правило должно быть в форме «Запрещать X если Y» и не содержать мягких формулировок.
      detailed: >
        Остановка. Мягкие формулировки не создают контроля качества.
        Следствие: допуск превращается в совет.
        Исправление: сформулируйте однозначный запрет действия при невыполненном условии.

  - error_code: ERR_GOAL_RULE_MISMATCH
    reason_class: LOGIC_MISMATCH
    title: "Разрыв логики цель → допуск"
    variants:
      short: "Критическая ошибка. Вы запрещаете одно, а учите другому."
      normal: >
        Критическая ошибка логики. Правило допуска не является следствием цели:
        действие/контекст/стандарт не совпадают.
      detailed: >
        Критическая ошибка логики. Сейчас цель и правило допуска описывают разные объекты.
        Следствие: курс не может быть проверяемым и управляемым — допуск будет произвольным.
        Исправление: приведите цель и правило к одной связке: действие → стандарт → условие недопуска.

  # =========================================================
  # Gate 03 — CONTENT_TO_DECISIONS_03
  # =========================================================
  - error_code: ERR_CONTENT_WITHOUT_DECISIONS
    reason_class: CONTENT_CENTRIC_DESIGN
    title: "Контент вместо решений"
    variants:
      short: "Запрет. Контент не привязан к решениям."
      normal: >
        Запрет. План курса построен вокруг тем, а не вокруг решений и типовых ошибок.
        Контент не является точкой проектирования.
      detailed: >
        Запрет. Темы без решений не предотвращают ошибок.
        Следствие: курс становится библиотекой материалов без контроля результата.
        Исправление: сформируйте карту критических решений и привяжите каждый блок к предотвращаемой ошибке.

  - error_code: ERR_INSUFFICIENT_DECISIONS
    reason_class: NO_CRITICAL_DECISIONS
    title: "Недостаточно критических решений"
    variants:
      short: "Остановка. Нужны минимум 3 решения с альтернативами и ошибкой."
      normal: >
        Остановка. Карта решений должна содержать минимум 3 решения, альтернативы выбора и типовую ошибку.
      detailed: >
        Остановка. Без набора решений система не может построить обучение как механизм предотвращения ошибок.
        Исправление: добавьте решения из реальной практики: где человек выбирает и где чаще ошибается.

  - error_code: ERR_THEORETICAL_DECISIONS
    reason_class: THEORETICAL_DECISIONS
    title: "Теория вместо выбора"
    variants:
      short: "Запрет. Решения описаны как теория, а не выбор."
      normal: >
        Запрет. Решение должно быть выбором между альтернативами.
        Формулировки вида «понять/осознать» недопустимы.
      detailed: >
        Запрет. Теоретические формулировки не создают проверяемого поведения.
        Исправление: перепишите решения в виде: событие → варианты → типовой неправильный выбор.

  - error_code: ERR_CONTENT_NOT_PREVENTING_ERRORS
    reason_class: CONTENT_ERROR_MISMATCH
    title: "Контент не предотвращает ошибки"
    variants:
      short: "Критическая ошибка. Нет связки контент → решение → ошибка."
      normal: >
        Критическая ошибка. Контент не связан с предотвращением конкретных ошибок/решений.
        Вы производите материал, а не механизм.
      detailed: >
        Критическая ошибка. Если решение остаётся без связки, курс теряет управляемость.
        Исправление: для каждого блока укажите решение и ошибку, которую блок должен предотвращать, и почему.

  # =========================================================
  # Gate 04 — ASSESSMENT_TO_ADMISSION_04
  # =========================================================
  - error_code: ERR_KNOWLEDGE_ASSESSMENT
    reason_class: KNOWLEDGE_CHECK
    title: "Проверка знаний"
    variants:
      short: "Запрет. Тест знаний не даёт права допускать к действию."
      normal: >
        Запрет. Оценивание построено как контроль знаний/теории или самооценка.
        Это не проверяет навык.
      detailed: >
        Запрет. Знание не гарантирует правильного действия.
        Следствие: контроль качества симулируется.
        Исправление: замените на проваливаемую симуляцию/кейс/практику с явными условиями провала.

  - error_code: ERR_NON_FAILABLE_ASSESSMENT
    reason_class: NO_FAILURE_POSSIBILITY
    title: "Нельзя провалить"
    variants:
      short: "Остановка. Проверку невозможно провалить."
      normal: >
        Остановка. В дизайне проверки нет условий провала.
        Без риска недопуска контроля нет.
      detailed: >
        Остановка. Если провал невозможен, результат нельзя считать верифицированным.
        Исправление: задайте конкретные критерии провала (ошибки) и последствия недопуска.

  - error_code: ERR_SOFT_ADMISSION
    reason_class: SOFT_ADMISSION
    title: "Мягкий допуск"
    variants:
      short: "Запрет. Допуск должен быть бинарным."
      normal: >
        Запрет. Формулировка допуска содержит мягкие слова («рекомендуется/желательно»).
        Это не управленческое решение.
      detailed: >
        Запрет. Мягкий допуск не ограничивает действие — значит не снижает риск.
        Исправление: перепишите как бинарный недопуск к конкретному действию при конкретном провале.

  - error_code: ERR_NO_REAL_CONSEQUENCE
    reason_class: NO_REAL_CONSEQUENCE
    title: "Нет последствий"
    variants:
      short: "Критическая ошибка. Недопуск не меняет ничего в реальности."
      normal: >
        Критическая ошибка. При провале нет реального запрета на действие и нет пути ремедиации.
      detailed: >
        Критическая ошибка. Проверка без последствий — симуляция контроля качества.
        Исправление: определите, какое действие блокируется при провале, и что нужно сделать, чтобы снова получить допуск.

  # =========================================================
  # Gate 05 — UNIVERSALITY_FILTER_05
  # =========================================================
  - error_code: ERR_UNIVERSAL_AUDIENCE
    reason_class: UNIVERSALITY_CLAIM
    title: "Универсальная аудитория"
    variants:
      short: "Запрет. Курс не может быть «для всех»."
      normal: >
        Запрет. Заявлена универсальная аудитория или размытые роли.
        Нужны критерии включения/исключения.
      detailed: >
        Запрет. Универсальность уничтожает ответственность и маскирует ошибки.
        Исправление: задайте критерии допуска и кому курс противопоказан (явные исключения).

  - error_code: ERR_NO_EXCLUSION_CRITERIA
    reason_class: NO_EXCLUSIONS
    title: "Нет исключений"
    variants:
      short: "Остановка. Не указано, кому курс противопоказан."
      normal: >
        Остановка. Отсутствуют критерии недопуска.
        Это оставляет риски применения без контроля.
      detailed: >
        Остановка. Если вы не описали, кому нельзя, вы не контролируете ущерб от неверного применения.
        Исправление: добавьте явные исключения и критерии недопуска.

  - error_code: ERR_SELF_DECLARED_LEVEL
    reason_class: SELF_ASSESSMENT_PLACEMENT
    title: "Самооценка уровня"
    variants:
      short: "Запрет. Уровень входа нельзя определять самооценкой."
      normal: >
        Запрет. Уровень входа задан через самооценку.
        Нужна диагностика, которую можно провалить, и правило распределения.
      detailed: >
        Запрет. Самооценка не является проверкой и не снижает риск.
        Исправление: задайте диагностическую процедуру, критерии провала и правила распределения по траекториям.

  - error_code: ERR_NO_BRANCHING
    reason_class: NO_BRANCHING
    title: "Нет траекторий"
    variants:
      short: "Запрет. Нужны минимум 2 траектории и точки гейтинга."
      normal: >
        Запрет. Отсутствует ветвление/адаптация по уровню и точки проверки/перевода/недопуска.
      detailed: >
        Запрет. Одна программа для всех делает курс неуправляемым и небезопасным.
        Исправление: задайте минимум 2 траектории и точки гейтинга, где возможен перевод или недопуск.

  - error_code: ERR_NO_CONTRAINDICATIONS
    reason_class: NO_RISK_CONTROL
    title: "Нет противопоказаний"
    variants:
      short: "Критическая ошибка. Не описаны риски и контроль вреда."
      normal: >
        Критическая ошибка. Противопоказания и риски применения отсутствуют или описаны общими фразами.
      detailed: >
        Критическая ошибка. Без контроля рисков курс может вредить.
        Исправление: укажите минимум 2 сценария риска, типовую ошибку применения и конкретный запрет/условие, которое предотвращает вред.

ui_bindings:
  # Какую версию показывать по умолчанию в UI
  default_variant: normal
  escalation_rules:
    - when_reason_class: LOGIC_MISMATCH
      use_variant: detailed
    - when_reason_class: NO_REAL_CONSEQUENCE
      use_variant: detailed
    - when_reason_class: NO_RISK_CONTROL
      use_variant: detailed
    - when_repeat_block_count_gte: 2
      use_variant: detailed

